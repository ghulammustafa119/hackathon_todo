[supervisord]
nodaemon=true
logfile=/tmp/supervisord.log
logfile_maxbytes=1MB
logfile_backups=0

[program:backend]
command=python -m uvicorn src.main:app --host 0.0.0.0 --port 8000 --workers 2
directory=/app/backend
autostart=true
autorestart=true
stdout_logfile=/tmp/backend.log
stderr_logfile=/tmp/backend_error.log
environment=DATABASE_URL="%(ENV_DATABASE_URL)s",COHERE_API_KEY="%(ENV_COHERE_API_KEY)s",JWT_SECRET_KEY="%(ENV_JWT_SECRET_KEY)s",ACCESS_TOKEN_EXPIRE_MINUTES="%(ENV_ACCESS_TOKEN_EXPIRE_MINUTES)s",REFRESH_TOKEN_EXPIRE_DAYS="%(ENV_REFRESH_TOKEN_EXPIRE_DAYS)s",NEON_DATABASE_URL="%(ENV_NEON_DATABASE_URL)s"

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/tmp/nginx.log
stderr_logfile=/tmp/nginx_error.log